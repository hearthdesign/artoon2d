{% extends 'artoon2d_blog/base.html' %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}
    <article>
        <h2>{{ post.title }}</h2>
        {# Show author and created date #}
        <p><strong>By:</strong> {{ post.author }} | <strong>Published:</strong> {{ post.created_at|date:"F j, Y" }}</p>
        <p><em>{{ post.created_at|timesince }} ago</em></p>
        {# Show updated date only if different from created date #}
        {% if post.updated_at > post.created_at %}
            <p><em>Updated on {{ post.updated_at|date:"F j, Y" }}</em></p>
        {% endif %}
        {# Show category and theme if exists #}
        {% if post.category %}
            <p><strong>Category:</strong> {{ post.category.name }}</p>
        {% endif %}

        {% if post.theme %}
            <p><strong>Theme:</strong> {{ post.theme }}</p>
        {% endif %}
        {# Show content with linebreaks #}
        <div>
            {{ post.content|linebreaks }}
        </div>

        {% if post.featured_image %}
            <div>
                <img src="{{ post.image.url }}" alt="{{ post.title }}" style="max-width:100%;">
            </div>
        {% endif %}
        {% if user == post.author %}
            <a href="{% url 'post_update' post.pk %}">Edit Post</a>
        {% endif %}

        {# Show tags if exists #}
        {% if post.tags.all %}
            <p><strong>Tags:</strong>
                {% for tag in post.tags.all %}
                    {{ tag.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
        {% endif %}
        {# Link to go back to post list #}
        <p><a href="{% url 'post_list' %}">‚Üê Back to all posts</a></p>
    </article>
{% endblock %}